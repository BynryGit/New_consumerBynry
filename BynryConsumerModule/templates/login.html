<!DOCTYPE html>

<html lang="en">
   {% load staticfiles %}
    <head>
        <meta charset="utf-8" />
        <title>Login | Bynry</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta content="width=device-width, initial-scale=1" name="viewport" />
        <meta content="" name="description" />
        <meta content="" name="author" />
        <!-- BEGIN GLOBAL MANDATORY STYLES -->
        <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=all" rel="stylesheet" type="text/css" />
        <link href="{% static 'assets/global/plugins/font-awesome/css/font-awesome.min.css' %}"  rel="stylesheet" type="text/css" />
        <link href="{% static 'assets/global/plugins/simple-line-icons/simple-line-icons.min.css' %}"  rel="stylesheet" type="text/css" />
        <link href="{% static 'assets/global/plugins/bootstrap/css/bootstrap.min.css' %}"  rel="stylesheet" type="text/css" />
        <link href="{% static 'assets/global/plugins/uniform/css/uniform.default.css' %}"  rel="stylesheet" type="text/css" />
        <link href="{% static 'assets/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css' %}"  rel="stylesheet" type="text/css" />
        <link href="{% static 'assets/global/plugins/select2/css/select2.min.css' %}"  rel="stylesheet" type="text/css" />
        <link href="{% static 'assets/global/plugins/select2/css/select2-bootstrap.min.css' %}"  rel="stylesheet" type="text/css" />
        <link href="{% static 'assets/global/css/components.min.css' %}"  rel="stylesheet" id="style_components" type="text/css" />
        <link href="{% static 'assets/global/css/plugins.min.css' %}"  rel="stylesheet" type="text/css" />
        <link href="{% static 'assets/pages/css/login-4.min.css' %}"  rel="stylesheet" type="text/css" />
        <link rel="shortcut icon" href="favicon.ico" /> 
        
        <style type="text/css">
			.login .logo1 {
			    margin: 30px auto 8px;
			    padding: 15px;
			    text-align: center;
			}        
			.custom-label{
				color:#fff;font-size: 25px;			
			}
			.forget-password {
                border-top: 1px dotted #eee;
                margin-top: 15px;
            }
        </style>	  
        
    </head>
    <!-- END HEAD -->

    <body class=" login">
        <div class="logo1">
            	 <label style="color:#fff;font-size: 25px;">Bynry CRM</label>
        </div>
        <div class="content" style=" height: 309px;">
            <form id="login-form" class="login-form">
                <h3 class="form-title">Login to your account</h3>
                <div class="alert alert-danger display-hide">
                    <button class="close" data-close="alert"></button>
                    <span id="error_msg"> Enter any username and password. </span>
                </div>
                <div class="form-group">
                    <label class="control-label visible-ie8 visible-ie9">Username</label>
                    <div class="input-icon">
                        <i class="fa fa-user"></i>
                        <input class="form-control placeholder-no-fix" type="email" autocomplete="off" placeholder="Username" name="username" id="username"/> </div>
                </div>
                <div class="form-group">
                    <label class="control-label visible-ie8 visible-ie9">Password</label>
                    <div class="input-icon">
                        <i class="fa fa-lock"></i>
                        <input class="form-control placeholder-no-fix" type="password" autocomplete="off" placeholder="Password" name="password" id="password"/> </div>
                </div>
                <div class="form-actions">
                    <!--<label class="checkbox">-->
                        <!--<input type="checkbox" name="remember" value="1" /> Remember me </label>-->
                    <button type="submit" class="btn green text-right pull-right"> Login </button>
                </div>
                <!-- <div class="forget-password">
                     <h4>Forgot your password ?</h4>
                    <p> no worries, click
                        <a href="javascript:;" id="forget-password"> here </a> to reset your password. </p> 
                </div> -->
            </form>

            <form class="forget-form" action="index.html" method="post">
                <h3>Forget Password ?</h3>
                <p> Enter your e-mail address below to reset your password. </p>
                <div class="form-group">
                    <div class="input-icon">
                        <i class="fa fa-envelope"></i>
                        <input class="form-control placeholder-no-fix" type="text" autocomplete="off" placeholder="Email" name="email" /> </div>
                </div>
                <div class="form-actions">
                    <button type="button" id="back-btn" class="btn red btn-outline">Back </button>
                    <button type="submit" class="btn green pull-right"> Submit </button>
                </div>
            </form>            
        </div>
			
        <div class="copyright"> 2017 &copy; Bynry Technologies Pvt. Ltd. </div>
        
        <!-- BEGIN CORE PLUGINS -->
        <script src="{% static 'assets/global/plugins/jquery.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'assets/global/plugins/bootstrap/js/bootstrap.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'assets/global/plugins/js.cookie.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'assets/global/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'assets/global/plugins/jquery.blockui.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'assets/global/plugins/uniform/jquery.uniform.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'assets/global/plugins/jquery-validation/js/jquery.validate.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'assets/global/plugins/jquery-validation/js/additional-methods.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'assets/global/plugins/select2/js/select2.full.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'assets/global/plugins/backstretch/jquery.backstretch.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'assets/global/scripts/app.min.js' %}" type="text/javascript"></script>

	<script type="text/javascript">
		var Login = function () {
	    var e = function () {
	        $(".login-form").validate({
	            errorElement: "span",
	            errorClass: "help-block",
	            focusInvalid: !1,
	            rules: {username: {required: !0}, password: {required: !0}, remember: {required: !1}},
	            messages: {username: {required: "Username is required."}, password: {required: "Password is required."}},
	            invalidHandler: function (e, r) {
	                $("#error_msg").text("Please enter username and password");
	                $(".alert-danger", $(".login-form")).show();
	            },
	            highlight: function (e) {
	                $(e).closest(".form-group").addClass("has-error")
	            },
	            success: function (e) {
	                e.closest(".form-group").removeClass("has-error"), e.remove()
	            },
	            errorPlacement: function (e, r) {
	                e.insertAfter(r.closest(".input-icon"))
	            },
	            submitHandler: function (e) {
	                //console.log($("#login_form").serialize());
	                $.ajax({
                        type : 'POST',
                        url : '/log-in/',
                        data : {
                            'username':$("#username").val(),
                            'password':$("#password").val()
                        },
                        success: function(response) {
                            if(response.success=='true'){
                                location.href='/dashboard/';
                            }
                            if(response.message=='Invalid Username'){
                                $("#error_msg").text("Please enter valid username");
                                $(".alert-danger", $(".login-form")).show()
                            }
                            if(response.message=='Invalid Password'){
                                $("#error_msg").text("Please enter valid password");
                                $(".alert-danger", $(".login-form")).show()
                            }
                        },
                        error: function(response){
                            captcha_reload()
                        },
                    });
	            }
	        }), $(".login-form input").keypress(function (e) {
	            return 13 == e.which ? ($(".login-form").validate().form() && $(".login-form").submit(), !1) : void 0
	        })
	    }, r = function () {
	        $(".forget-form").validate({
	            errorElement: "span",
	            errorClass: "help-block",
	            focusInvalid: !1,
	            ignore: "",
	            rules: {email: {required: !0, email: !0}},
	            messages: {email: {required: "Email is required."}},
	            invalidHandler: function (e, r) {
	            },
	            highlight: function (e) {
	                $(e).closest(".form-group").addClass("has-error")
	            },
	            success: function (e) {
	                e.closest(".form-group").removeClass("has-error"), e.remove()
	            },
	            errorPlacement: function (e, r) {
	                e.insertAfter(r.closest(".input-icon"))
	            },
	            submitHandler: function (e) {

	                e.submit()

	            }
	        }), $(".forget-form input").keypress(function (e) {
	            return 13 == e.which ? ($(".forget-form").validate().form() && $(".forget-form").submit(), !1) : void 0
	        }), jQuery("#forget-password").click(function () {
	            jQuery(".login-form").hide(), jQuery(".forget-form").show()
	        }), jQuery("#back-btn").click(function () {
	            jQuery(".login-form").show(), jQuery(".forget-form").hide()
	        })
	    }, s = function () {
	        function e(e) {
	            if (!e.id)return e.text;
	            var r = $('<span><img src="assets/global/img/flags/' + e.element.value.toLowerCase() + '.png" class="img-flag" /> ' + e.text + "</span>");
	            return r
	        }
	
	        jQuery().select2 && $("#country_list").size() > 0 && ($("#country_list").select2({
	            placeholder: '<i class="fa fa-map-marker"></i>&nbsp;Select a Country',
	            templateResult: e,
	            templateSelection: e,
	            width: "auto",
	            escapeMarkup: function (e) {
	                return e
	            }
	        }), $("#country_list").change(function () {
	            $(".register-form").validate().element($(this))
	        })), $(".register-form").validate({
	            errorElement: "span",
	            errorClass: "help-block",
	            focusInvalid: !1,
	            ignore: "",
	            rules: {
	                fullname: {required: !0},
	                email: {required: !0, email: !0},
	                address: {required: !0},
	                city: {required: !0},
	                country: {required: !0},
	                username: {required: !0},
	                password: {required: !0},
	                rpassword: {equalTo: "#register_password"},
	                tnc: {required: !0}
	            },
	            messages: {tnc: {required: "Please accept TNC first."}},
	            invalidHandler: function (e, r) {
	            },
	            highlight: function (e) {
	                $(e).closest(".form-group").addClass("has-error")
	            },
	            success: function (e) {
	                e.closest(".form-group").removeClass("has-error"), e.remove()
	            },
	            errorPlacement: function (e, r) {
	                "tnc" == r.attr("name") ? e.insertAfter($("#register_tnc_error")) : 1 === r.closest(".input-icon").size() ? e.insertAfter(r.closest(".input-icon")) : e.insertAfter(r)
	            },
	            submitHandler: function (e) {
	                e.submit()
	            }
	        }), $(".register-form input").keypress(function (e) {
	            return 13 == e.which ? ($(".register-form").validate().form() && $(".register-form").submit(), !1) : void 0
	        }), jQuery("#register-btn").click(function () {
	            jQuery(".login-form").hide(), jQuery(".register-form").show()
	        }), jQuery("#register-back-btn").click(function () {
	            jQuery(".login-form").show(), jQuery(".register-form").hide()
	        })
	    };
	    return {
	        init: function () {
	            e(), r(), s(), $.backstretch(["{% static 'assets/pages/media/bg/2.jpg' %}", "{% static 'assets/pages/media/bg/2.jpg' %}", "{% static 'assets/pages/media/bg/2.jpg' %}", "{% static 'assets/pages/media/bg/2.jpg' %}"], {
	                fade: 1e3,
	                duration: 8e3
	            })
	        }
	    }
	}();
	jQuery(document).ready(function () {
	    Login.init()
	});
	</script>
</body>
</html>